

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>lib.deconvolve module &mdash; sf_deconvolve 3.2 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="sf_deconvolve 3.2 documentation" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> sf_deconvolve
          

          
          </a>

          
            
            
              <div class="version">
                3.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="sf_deconvolve.html">sf_deconvolve module</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">sf_deconvolve</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>lib.deconvolve module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/lib.deconvolve.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-lib.deconvolve">
<span id="lib-deconvolve-module"></span><h1>lib.deconvolve module<a class="headerlink" href="#module-lib.deconvolve" title="Permalink to this headline">¶</a></h1>
<p>PSF DECONVOLUTION MODULE</p>
<p>This module deconvolves a set of galaxy images with a known object-variant PSF.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">Samuel Farrens &lt;<a class="reference external" href="mailto:samuel&#46;farrens&#37;&#52;&#48;gmail&#46;com">samuel<span>&#46;</span>farrens<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</td>
</tr>
<tr class="field-even field"><th class="field-name">Version:</th><td class="field-body">6.2</td>
</tr>
<tr class="field-odd field"><th class="field-name">Date:</th><td class="field-body">22/10/2017</td>
</tr>
</tbody>
</table>
<dl class="function">
<dt id="lib.deconvolve.get_lambda">
<code class="descclassname">lib.deconvolve.</code><code class="descname">get_lambda</code><span class="sig-paren">(</span><em>n_images</em>, <em>p_pixel</em>, <em>sigma</em>, <em>spec_rad</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lib/deconvolve.html#get_lambda"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lib.deconvolve.get_lambda" title="Permalink to this definition">¶</a></dt>
<dd><p>Get lambda value</p>
<p>This method calculates the singular value threshold for low-rank
regularisation</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>n_images</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Total number of images</li>
<li><strong>p_pixel</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Total number of pixels</li>
<li><strong>sigma</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Noise standard deviation</li>
<li><strong>spec_rad</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; The spectral radius of the gradient operator</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">float Lambda value</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lib.deconvolve.perform_reweighting">
<code class="descclassname">lib.deconvolve.</code><code class="descname">perform_reweighting</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lib/deconvolve.html#perform_reweighting"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lib.deconvolve.perform_reweighting" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform reweighting</p>
<p>This method updates the weights used for thresholding in the sparse domain</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">dict Updated keyword arguments</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lib.deconvolve.run">
<code class="descclassname">lib.deconvolve.</code><code class="descname">run</code><span class="sig-paren">(</span><em>data</em>, <em>psf</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lib/deconvolve.html#run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lib.deconvolve.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run deconvolution</p>
<p>This method initialises the operator classes and runs the optimisation
algorithm</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> (<em>np.ndarray</em>) &#8211; Input data array, an array of 2D images</li>
<li><strong>psf</strong> (<em>np.ndarray</em>) &#8211; Input PSF array, a single 2D PSF or an array of 2D PSFs</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">np.ndarray decconvolved data</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lib.deconvolve.set_condat_param">
<code class="descclassname">lib.deconvolve.</code><code class="descname">set_condat_param</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lib/deconvolve.html#set_condat_param"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lib.deconvolve.set_condat_param" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the Condat-Vu parameters</p>
<p>This method sets the values of tau and sigma in the Condat-Vu proximal-dual
splitting algorithm if not already provided. It additionally checks that
the combination of values will lead to convergence.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">dict Updated keyword arguments</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lib.deconvolve.set_grad_op">
<code class="descclassname">lib.deconvolve.</code><code class="descname">set_grad_op</code><span class="sig-paren">(</span><em>data</em>, <em>psf</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lib/deconvolve.html#set_grad_op"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lib.deconvolve.set_grad_op" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the gradient operator</p>
<p>This method defines the gradient operator class to use and add an instance
to the keyword arguments.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> (<em>np.ndarray</em>) &#8211; Input noisy data (3D array)</li>
<li><strong>psf</strong> (<em>np.ndarray</em>) &#8211; PSF data (2D or 3D array)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">dict Updated keyword arguments</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lib.deconvolve.set_linear_op">
<code class="descclassname">lib.deconvolve.</code><code class="descname">set_linear_op</code><span class="sig-paren">(</span><em>data</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lib/deconvolve.html#set_linear_op"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lib.deconvolve.set_linear_op" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the gradient operator</p>
<p>This method defines the gradient operator class to use and add an instance
to the keyword arguments. It additionally add the l1 norm of the linear
operator and the wavelet filters (if used) to the kwagrs.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> (<em>np.ndarray</em>) &#8211; Input noisy data (3D array)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">dict Updated keyword arguments</td>
</tr>
</tbody>
</table>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<ul class="last simple">
<li>Clean up wavelet_filters and l1norm</li>
</ul>
</div>
</dd></dl>

<dl class="function">
<dt id="lib.deconvolve.set_lowr_thresh">
<code class="descclassname">lib.deconvolve.</code><code class="descname">set_lowr_thresh</code><span class="sig-paren">(</span><em>data_shape</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lib/deconvolve.html#set_lowr_thresh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lib.deconvolve.set_lowr_thresh" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the low-rank threshold</p>
<p>This method sets the value of the low-rank singular value threshold.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data_shape</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a>) &#8211; Shape of the input data array</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">dict Updated keyword arguments</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lib.deconvolve.set_noise">
<code class="descclassname">lib.deconvolve.</code><code class="descname">set_noise</code><span class="sig-paren">(</span><em>data</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lib/deconvolve.html#set_noise"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lib.deconvolve.set_noise" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the noise level</p>
<p>This method calculates the noise standard deviation using the median
absolute deviation (MAD) of the input data and adds it to the keyword
arguments.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> (<em>np.ndarray</em>) &#8211; Input noisy data (3D array)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">dict Updated keyword arguments</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lib.deconvolve.set_optimisation">
<code class="descclassname">lib.deconvolve.</code><code class="descname">set_optimisation</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lib/deconvolve.html#set_optimisation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lib.deconvolve.set_optimisation" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the optimisation technique</p>
<p>This method sets the technique used for opttimising the problem</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">dict Updated keyword arguments</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lib.deconvolve.set_primal_dual">
<code class="descclassname">lib.deconvolve.</code><code class="descname">set_primal_dual</code><span class="sig-paren">(</span><em>data_shape</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lib/deconvolve.html#set_primal_dual"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lib.deconvolve.set_primal_dual" title="Permalink to this definition">¶</a></dt>
<dd><p>Set primal and dual variables</p>
<p>This method sets the initial values of the primal and dual variables</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data_shape</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a>) &#8211; Shape of the input data array</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">dict Updated keyword arguments</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lib.deconvolve.set_prox_op_and_cost">
<code class="descclassname">lib.deconvolve.</code><code class="descname">set_prox_op_and_cost</code><span class="sig-paren">(</span><em>data</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lib/deconvolve.html#set_prox_op_and_cost"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lib.deconvolve.set_prox_op_and_cost" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the proximity operators and cost function</p>
<p>This method sets the proximity operators and cost function instances.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> (<em>np.ndarray</em>) &#8211; Input noisy data (3D array)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">dict Updated keyword arguments</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lib.deconvolve.set_sparse_weights">
<code class="descclassname">lib.deconvolve.</code><code class="descname">set_sparse_weights</code><span class="sig-paren">(</span><em>data_shape</em>, <em>psf</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lib/deconvolve.html#set_sparse_weights"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lib.deconvolve.set_sparse_weights" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the sparsity weights</p>
<p>This method defines the weights for thresholding in the sparse domain and
add them to the keyword arguments. It additionally defines the shape of the
dual variable.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data_shape</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a>) &#8211; Shape of the input data array</li>
<li><strong>psf</strong> (<em>np.ndarray</em>) &#8211; PSF data (2D or 3D array)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">dict Updated keyword arguments</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Samuel Farrens.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'3.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>